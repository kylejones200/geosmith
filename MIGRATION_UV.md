# Migration to uv

This document outlines the migration from pip/requirements-based dependency management to uv.

## What Changed

- **Dependency Management**: Switched from `pip` to `uv` for faster, more reliable dependency resolution
- **Lock File**: Added `uv.lock` for reproducible builds
- **Dev Dependencies**: Moved from `[project.optional-dependencies].dev` to `[dependency-groups].dev` (PEP 735)
- **CI/CD**: Updated GitHub Actions workflows to use `uv`
- **Documentation**: Updated README and CONTRIBUTING with `uv` commands

## Command Migration

### Installation

| Old (pip) | New (uv) |
|-----------|----------|
| `pip install geosmith` | `uv pip install geosmith` |
| `pip install -e ".[dev]"` | `uv sync --group dev` |
| `pip install -e ".[dev,ml]"` | `uv sync --group dev --extra ml` |

### Running Commands

| Old | New |
|-----|-----|
| `pytest` | `uv run pytest` |
| `black .` | `uv run black .` |
| `ruff check .` | `uv run ruff check .` |
| `mypy geosmith/` | `uv run mypy geosmith/` |
| `python -m build` | `uv run python -m build` |

### Development Setup

| Old | New |
|-----|-----|
| `python -m venv venv`<br>`source venv/bin/activate`<br>`pip install -e ".[dev]"` | `uv sync --group dev` |

## Benefits

1. **Faster**: uv is 10-100x faster than pip
2. **Reproducible**: `uv.lock` ensures consistent installs across environments
3. **Simpler**: No need to manually manage virtual environments
4. **Modern**: Uses PEP 735 dependency groups for dev dependencies

## Files Changed

- `pyproject.toml`: Moved dev deps to `[dependency-groups]`
- `.github/workflows/ci.yml`: Updated to use `uv sync --frozen`
- `.github/workflows/release.yml`: Updated to use `uv` for building
- `README.md`: Updated installation instructions
- `CONTRIBUTING.md`: Updated development setup instructions
- `uv.lock`: New lock file (generated by `uv sync`)

## Backward Compatibility

- `pip install geosmith` still works (pip reads `pyproject.toml`)
- Existing virtual environments continue to work
- No API changes to the library itself

## Troubleshooting

If you encounter issues:

1. **Clear old virtual environment**: `rm -rf venv .venv`
2. **Reinstall with uv**: `uv sync --group dev`
3. **Check Python version**: Requires Python 3.12+

For more information, see the [uv documentation](https://docs.astral.sh/uv/).

